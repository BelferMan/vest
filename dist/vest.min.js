!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).vest=e()}(this,(function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(){return(e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function n(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function o(t,e){return t(e={exports:{}},e.exports),e.exports}var u=o((function(n,r){n.exports=function(){function n(e){return(n="function"==typeof Symbol&&"symbol"==t(Symbol.iterator)?function(e){return t(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":t(e)})(e)}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var i=function(t,e){var n,r=Object.prototype.hasOwnProperty.call(t,e)&&"function"==typeof t[e];return r||(n='Rule "'.concat(e,'" was not found in rules object. Make sure you typed it correctly.'),setTimeout((function(){throw new Error("[".concat("enforce","]: ").concat(n))}))),r},a=Function("return this")(),s=function(){return"function"==typeof a.Proxy};function c(t){return Boolean(Array.isArray(t))}function f(t){return Boolean("number"==typeof t)}function l(t){return Boolean("string"==typeof t)}function p(t,e){return e instanceof RegExp?e.test(t):"string"==typeof e&&new RegExp(e).test(t)}function y(t,e){return Array.isArray(e)&&["string","number","boolean"].includes(n(t))?e.includes(t):"string"==typeof e&&"string"==typeof t&&e.includes(t)}function m(t,e){return t===e}function g(t){var e=!isNaN(parseFloat(t))&&!isNaN(Number(t))&&isFinite(t);return Boolean(e)}function v(t,e){return g(t)&&g(e)&&Number(t)===Number(e)}function b(t){return!t||(g(t)?0===t:Object.prototype.hasOwnProperty.call(t,"length")?0===t.length:"object"!==n(t)||0===Object.keys(t).length)}function h(t,e){return g(t)&&g(e)&&Number(t)>Number(e)}function d(t,e){return g(t)&&g(e)&&Number(t)>=Number(e)}function w(t,e){return g(t)&&g(e)&&Number(t)<Number(e)}function O(t,e){return g(t)&&g(e)&&Number(t)<=Number(e)}function E(t,e){return t.length===e}function N(t){return!!t}c.negativeForm="isNotArray",f.negativeForm="isNotNumber",l.negativeForm="isNotString",p.negativeForm="notMatches",y.negativeForm="notInside",m.negativeForm="notEquals",g.negativeForm="isNotNumeric",v.negativeForm="numberNotEquals",b.negativeForm="isNotEmpty",h.alias="gt",d.alias="gte",w.alias="lt",O.alias="lte",E.negativeForm="lengthNotEquals",N.negativeForm="isFalsy";var x=function(t){var e=function(e){var n=t[e].negativeForm,r=t[e].alias;n&&(t[n]=function(){return!t[e].apply(t,arguments)}),r&&(t[r]=t[e])};for(var n in t)e(n);return t}({isArray:c,isNumber:f,isString:l,matches:p,inside:y,equals:m,numberEquals:v,isNumeric:g,isEmpty:b,greaterThan:h,greaterThanOrEquals:d,lessThan:w,lessThanOrEquals:O,longerThan:function(t,e){return t.length>e},longerThanOrEquals:function(t,e){return t.length>=e},shorterThan:function(t,e){return t.length<e},shorterThanOrEquals:function(t,e){return t.length<=e},lengthEquals:E,isOdd:function(t){return!!g(t)&&t%2!=0},isEven:function(t){return!!g(t)&&t%2==0},isTruthy:N});function T(t,e){if("function"==typeof t){for(var r=arguments.length,o=new Array(r>2?r-2:0),u=2;u<r;u++)o[u-2]=arguments[u];if(!0!==t.apply(void 0,[e].concat(o)))throw new Error("[Enforce]: invalid ".concat(n(e)," value"))}}function S(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=u({},x,{},t);if(s())return function(t){var e=new Proxy(n,{get:function(n,r){if(i(n,r))return function(){for(var o=arguments.length,u=new Array(o),i=0;i<o;i++)u[i]=arguments[i];return T.apply(void 0,[n[r],t].concat(u)),e}}});return e};var o=Object.keys(n);return function(t){return o.reduce((function(o,a){return e(o,u({},i(n,a)&&r({},a,(function(){for(var e=arguments.length,r=new Array(e),u=0;u<e;u++)r[u]=arguments[u];return T.apply(void 0,[n[a],t].concat(r)),o}))))}),{})}}var j=new S;return j.Enforce=S,j}()})),i=o((function(t,e){var n;t.exports=(n=function(t){if("function"==typeof t)try{var e=t();return 0!=e&&Boolean(e)}catch(t){return!1}return 0!=t&&Boolean(t)},function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.some(n)})})),a=Function("return this")(),s=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Error;return setTimeout((function(){throw new e("[Vest]: ".concat(t))}))},c="1.0.7".split(".")[0],f=Symbol.for("VEST#".concat(c)),l=function(){return a[f]},p=l,y=function(){return l().ctx},m=function(t){var e=a[f];return e?e.VERSION!==t.VERSION&&function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];s("Multiple versions of Vest detected: (".concat(e.join(),").\n    Most features should work regularly, but for optimal feature compatibility, you should have all running instances use the same version."))}(t.VERSION,e.VERSION):a[f]=t,a[f]};function g(t){p().ctx=this,e(this,t)}g.prototype.setCurrentTest=function(t){this.currentTest=t},g.prototype.removeCurrentTest=function(){delete this.currentTest},g.clear=function(){p().ctx=null};var v=function(t,e){var n=y();e&&(n?(n.exclusive=n.exclusive||{},[].concat(e).forEach((function(e){"string"==typeof e&&(n.exclusive[t]=n.exclusive[t]||{},n.exclusive[t][e]=!0)}))):s("".concat(t," ").concat("hook called outside of a running suite.")))};function b(t,n,r,o){e(this,{ctx:t,testFn:o,fieldName:n,statement:r,isWarning:!1,failed:!1})}b.prototype.valueOf=function(){return!0!==this.failed},b.prototype.fail=function(){return this.ctx.result.markFailure({fieldName:this.fieldName,statement:this.statement,isWarning:this.isWarning}),this.failed=!0,this},b.prototype.warn=function(){return this.isWarning=!0,this};var h=function(t){var e=t.testFn,n=t.statement,r=t.ctx,o=function(){return r.result.markAsDone(t)},u=function(e){t.statement="string"==typeof e?e:n,t.fail(),o()};r.setCurrentTest(t);try{e.then(o,u)}catch(t){u()}r.removeCurrentTest()},d=function(t){t.testFn;var e=t.ctx,n=t.fieldName,r=!1;if(function(t){var e=y();return!(!e||!e.exclusive)&&(!(!e.exclusive.skip||!e.exclusive.skip[t])||!!e.exclusive.only&&!e.exclusive.only[t])}(n))e.result.addToSkipped(n);else{e.result.markTestRun(n);var o=function(t){var e;t.ctx.setCurrentTest(t);try{e=t.testFn.apply(t)}catch(t){e=!1}return t.ctx.removeCurrentTest(),!1===e&&t.fail(),e}(t);o&&"function"==typeof o.then&&(r=!0,t.testFn=o),r&&e.result.setPending(t)}},w=function(t){var e={tests:[]},n=[],r={},o=!1,u=function(t){return!!e.tests.length&&(t?e.tests.some((function(e){return e.fieldName===t})):!!e.tests.length)},i=function(t){return t?Array.isArray(r[t])?r[t].forEach((function(t){return t(s)})):void 0:n.forEach((function(t){return t(s)}))},a=function(t){var e={};for(var n in s.tests)s.tests[n]&&s.tests[n][t]&&(e[n]=s.tests[n][t]);return e},s={name:t,errorCount:0,warnCount:0,testCount:0,tests:{},skipped:[],tested:[]};return Object.defineProperties(s,{hasErrors:{value:function(t){return t?Boolean(s.tests[t]&&s.tests[t].errorCount):!!s.errorCount},writable:!0,configurable:!0,enumerable:!1},hasWarnings:{value:function(t){return t?Boolean(s.tests[t]&&s.tests[t].warnCount):!!s.warnCount},writable:!0,configurable:!0,enumerable:!1},getErrors:{value:function(t){return t?s.tests[t].errors?s.tests[t].errors:[]:a("errors")},writable:!0,configurable:!0,enumerable:!1},getWarnings:{value:function(t){return t?s.tests[t].warnings?s.tests[t].warnings:[]:a("warnings")},writable:!0,configurable:!0,enumerable:!1},done:{value:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var a=e.length,c=e[a-1],f=e[a-2];return"function"!=typeof c?s:o?f&&!u(f)?(c(s),s):(f?(r[f]=r[f]||[],r[f].push(c)):n.push(c),s):(c(s),s)},writable:!0,configurable:!0,enumerable:!1},cancel:{value:function(){return s.canceled=!0,s},writable:!0,configurable:!0,enumerable:!1}}),{markTestRun:function(t){s.tests[t]||(s.tests[t]={testCount:0,errorCount:0,warnCount:0},s.tested.push(t)),s.tests[t].testCount++,s.testCount++},markFailure:function(t){var e,n,r=t.fieldName,o=t.statement,u=t.isWarning;s.tests[r]&&(u?(e="warnings",n="warnCount"):(e="errors",n="errorCount"),s.tests[r][e]=s.tests[r][e]||[],o&&s.tests[r][e].push(o),s[n]++,s.tests[r][n]++)},setPending:function(t){o=!0,e.tests.push(t)},addToSkipped:function(t){!s.skipped.includes(t)&&s.skipped.push(t)},markAsDone:function(t){s.canceled||(t&&(!function(t){e.tests=e.tests.filter((function(e){return e!==t}))}(t),u(t.fieldName)||i(t.fieldName)),u()||i())},pending:e.tests,output:s}};return m({VERSION:"1.0.7",enforce:u,draft:function(){var t=y();if(t)return t.result.output;s("draft hook called outside of a running suite.")},Enforce:u.Enforce,test:function(t){for(var e,n,r=arguments.length,o=new Array(r>1?r-1:0),u=1;u<r;u++)o[u-1]=arguments[u];if("string"==typeof o[0]?(e=o[0],n=o[1]):"function"==typeof o[0]&&(n=o[0]),"function"==typeof n){var i=new b(y(),t,e,n);return d(i),i}},any:i,validate:function(t,e){if("string"!=typeof t)return s("Suite initialization error. Expected name to be a string.",TypeError);if("function"!=typeof e)return s("Suite initialization error. Expected tests to be a function.",TypeError);var r=w(t);return new g({result:r}),e(),g.clear(),n(r.pending).forEach(h),r.output},only:function(t){return v("only",t)},skip:function(t){return v("skip",t)},warn:function(){var t=y();t?t.currentTest?t.currentTest.warn():s("warn hook called outside of a test callback. It won't have an effect."):s("warn hook called outside of a running suite.")}})}));
//# sourceMappingURL=vest.min.js.map
