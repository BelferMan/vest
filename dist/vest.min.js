!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).vest=e()}(this,(function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(){return(e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function n(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function r(t,e){return t(e={exports:{}},e.exports),e.exports}var o=r((function(n,r){n.exports=function(){function n(e){return(n="function"==typeof Symbol&&"symbol"==t(Symbol.iterator)?function(e){return t(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":t(e)})(e)}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var i=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)&&"function"==typeof t[e]},s=Function("return this")(),a=function(){return"function"==typeof s.Proxy};function c(t){return Boolean(Array.isArray(t))}function f(t){return Boolean("number"==typeof t)}function l(t){return Boolean("string"==typeof t)}function p(t,e){return e instanceof RegExp?e.test(t):"string"==typeof e&&new RegExp(e).test(t)}function y(t,e){return Array.isArray(e)&&["string","number","boolean"].includes(n(t))?e.includes(t):"string"==typeof e&&"string"==typeof t&&e.includes(t)}function g(t,e){return t===e}function m(t){var e=!isNaN(parseFloat(t))&&!isNaN(Number(t))&&isFinite(t);return Boolean(e)}function h(t,e){return m(t)&&m(e)&&Number(t)===Number(e)}function v(t){return!t||(m(t)?0===t:Object.prototype.hasOwnProperty.call(t,"length")?0===t.length:"object"!==n(t)||0===Object.keys(t).length)}function b(t,e){return m(t)&&m(e)&&Number(t)>Number(e)}function d(t,e){return m(t)&&m(e)&&Number(t)>=Number(e)}function w(t,e){return m(t)&&m(e)&&Number(t)<Number(e)}function O(t,e){return m(t)&&m(e)&&Number(t)<=Number(e)}function E(t,e){return t.length===e}function N(t){return!!t}c.negativeForm="isNotArray",f.negativeForm="isNotNumber",l.negativeForm="isNotString",p.negativeForm="notMatches",y.negativeForm="notInside",g.negativeForm="notEquals",m.negativeForm="isNotNumeric",h.negativeForm="numberNotEquals",v.negativeForm="isNotEmpty",b.alias="gt",d.alias="gte",w.alias="lt",O.alias="lte",E.negativeForm="lengthNotEquals",N.negativeForm="isFalsy";var x=function(t){var e=function(e){var n=t[e].negativeForm,r=t[e].alias;n&&(t[n]=function(){return!t[e].apply(t,arguments)}),r&&(t[r]=t[e])};for(var n in t)e(n);return t}({isArray:c,isNumber:f,isString:l,matches:p,inside:y,equals:g,numberEquals:h,isNumeric:m,isEmpty:v,greaterThan:b,greaterThanOrEquals:d,lessThan:w,lessThanOrEquals:O,longerThan:function(t,e){return t.length>e},longerThanOrEquals:function(t,e){return t.length>=e},shorterThan:function(t,e){return t.length<e},shorterThanOrEquals:function(t,e){return t.length<=e},lengthEquals:E,isOdd:function(t){return!!m(t)&&t%2!=0},isEven:function(t){return!!m(t)&&t%2==0},isTruthy:N});function T(t,e){if("function"==typeof t){for(var r=arguments.length,o=new Array(r>2?r-2:0),u=2;u<r;u++)o[u-2]=arguments[u];if(!0!==t.apply(void 0,[e].concat(o)))throw new Error("[Enforce]: invalid ".concat(n(e)," value"))}}function S(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=u({},x,{},t);if(a())return function(t){var e=new Proxy(n,{get:function(n,r){if(i(n,r))return function(){for(var o=arguments.length,u=new Array(o),i=0;i<o;i++)u[i]=arguments[i];return T.apply(void 0,[n[r],t].concat(u)),e}}});return e};var o=Object.keys(n);return function(t){return o.reduce((function(o,s){return e(o,u({},i(n,s)&&r({},s,(function(){for(var e=arguments.length,r=new Array(e),u=0;u<e;u++)r[u]=arguments[u];return T.apply(void 0,[n[s],t].concat(r)),o}))))}),{})}}var C=new S;return C.Enforce=S,C}()})),u=r((function(t,e){var n;t.exports=(n=function(t){if("function"==typeof t)try{var e=t();return 0!=e&&Boolean(e)}catch(t){return!1}return 0!=t&&Boolean(t)},function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.some(n)})})),i=Function("return this")(),s=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Error;return setTimeout((function(){throw new e("[Vest]: ".concat(t))}))},a="1.0.5".split(".")[0],c=Symbol.for("VEST#".concat(a)),f=function(){return i[c]},l={use:f,useContext:function(){return f().ctx},register:function(t){var e=i[c];return e?e.VERSION!==t.VERSION&&function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];s("Multiple versions of Vest detected: (".concat(e.join(),").\n    Most features should work regularly, but for optimal feature compatibility, you should have all running instances use the same version."))}(t.VERSION,e.VERSION):i[c]=t,i[c]}};function p(t){l.use().ctx=this,e(this,t)}p.prototype.setCurrentTest=function(t){this.currentTest=t},p.prototype.removeCurrentTest=function(){delete this.currentTest},p.clear=function(){l.use().ctx=null};var y=function(t,e){var n=l.useContext();e&&(n?(n.exclusive=n.exclusive||{},[].concat(e).forEach((function(e){"string"==typeof e&&(n.exclusive[t]=n.exclusive[t]||{},n.exclusive[t][e]=!0)}))):s("".concat(t," ").concat("hook called outside of a running suite.")))};function g(t,n,r,o){e(this,{ctx:t,testFn:o,fieldName:n,statement:r,isWarning:!1,failed:!1})}g.prototype.valueOf=function(){return!0!==this.failed},g.prototype.fail=function(){return this.ctx.result.markFailure({fieldName:this.fieldName,statement:this.statement,isWarning:this.isWarning}),this.failed=!0,this},g.prototype.warn=function(){return this.isWarning=!0,this};var m=function(t){var e=t.testFn,n=t.statement,r=t.ctx,o=function(){return r.result.markAsDone(t)},u=function(e){t.statement="string"==typeof e?e:n,t.fail(),o()};r.setCurrentTest(t);try{e.then(o,u)}catch(t){u()}r.removeCurrentTest()},h=function(t){var e,n=t.testFn,r=t.ctx,o=t.fieldName,u=!1;!function(t){var e=l.useContext();return!(!e||!e.exclusive)&&(!(!e.exclusive.skip||!e.exclusive.skip[t])||!!e.exclusive.only&&!e.exclusive.only[t])}(o)?(r.result.markTestRun(o),n&&"function"==typeof n.then?u=!0:e=function(t){var e;t.ctx.setCurrentTest(t);try{e=t.testFn.apply(t)}catch(t){e=!1}return t.ctx.removeCurrentTest(),!1===e&&t.fail(),e}(t),e&&"function"==typeof e.then&&(u=!0,t.testFn=e),u&&r.result.setPending(t)):r.result.addToSkipped(o)},v=function(t){var e={tests:[]},n=[],r={},o=!1,u=function(t){return!!e.tests.length&&(t?e.tests.some((function(e){return e.fieldName===t})):!!e.tests.length)},i=function(t){return t?Array.isArray(r[t])?r[t].forEach((function(t){return t(a)})):void 0:n.forEach((function(t){return t(a)}))},s=function(t){var e={};for(var n in a.tests)a.tests[n]&&a.tests[n][t]&&(e[n]=a.tests[n][t]);return e},a={name:t,errorCount:0,warnCount:0,testCount:0,tests:{},skipped:[],tested:[]};return Object.defineProperties(a,{hasErrors:{value:function(t){return t?Boolean(a.tests[t]&&a.tests[t].errorCount):!!a.errorCount},writable:!0,configurable:!0,enumerable:!1},hasWarnings:{value:function(t){return t?Boolean(a.tests[t]&&a.tests[t].warnCount):!!a.warnCount},writable:!0,configurable:!0,enumerable:!1},getErrors:{value:function(t){return t?a.tests[t].errors?a.tests[t].errors:[]:s("errors")},writable:!0,configurable:!0,enumerable:!1},getWarnings:{value:function(t){return t?a.tests[t].warnings?a.tests[t].warnings:[]:s("warnings")},writable:!0,configurable:!0,enumerable:!1},done:{value:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var s=e.length,c=e[s-1],f=e[s-2];return"function"!=typeof c?a:o?f&&!u(f)?(c(a),a):(f?(r[f]=r[f]||[],r[f].push(c)):n.push(c),a):(c(a),a)},writable:!0,configurable:!0,enumerable:!1},cancel:{value:function(){return a.canceled=!0,a},writable:!0,configurable:!0,enumerable:!1}}),{markTestRun:function(t){a.tests[t]||(a.tests[t]={testCount:0,errorCount:0,warnCount:0},a.tested.push(t)),a.tests[t].testCount++,a.testCount++},markFailure:function(t){var e,n,r=t.fieldName,o=t.statement,u=t.isWarning;a.tests[r]&&(u?(e="warnings",n="warnCount"):(e="errors",n="errorCount"),a.tests[r][e]=a.tests[r][e]||[],o&&a.tests[r][e].push(o),a[n]++,a.tests[r][n]++)},setPending:function(t){o=!0,e.tests.push(t)},addToSkipped:function(t){!a.skipped.includes(t)&&a.skipped.push(t)},markAsDone:function(t){a.canceled||(t&&(!function(t){e.tests=e.tests.filter((function(e){return e!==t}))}(t),u(t.fieldName)||i(t.fieldName)),u()||i())},pending:e.tests,output:a}};return l.register({VERSION:"1.0.5",enforce:o,draft:function(){var t=l.useContext();if(t)return t.result.output;s("draft hook called outside of a running suite.")},Enforce:o.Enforce,test:function(t){for(var e,n,r=arguments.length,o=new Array(r>1?r-1:0),u=1;u<r;u++)o[u-1]=arguments[u];if("string"==typeof o[0]?(e=o[0],n=o[1]):"function"==typeof o[0]&&(n=o[0]),"function"==typeof n){var i=new g(l.useContext(),t,e,n);return h(i),i}},any:u,validate:function(t,e){if("string"!=typeof t)return s("Suite initialization error. Expected name to be a string.",TypeError);if("function"!=typeof e)return s("Suite initialization error. Expected tests to be a function.",TypeError);var r=v(t);return new p({result:r}),e(),p.clear(),n(r.pending).forEach(m),r.output},only:function(t){return y("only",t)},skip:function(t){return y("skip",t)},warn:function(){var t=l.useContext();t?t.currentTest?t.currentTest.warn():s("warn hook called outside of a test callback. It won't have an effect."):s("warn hook called outside of a running suite.")}})}));
//# sourceMappingURL=vest.min.js.map
